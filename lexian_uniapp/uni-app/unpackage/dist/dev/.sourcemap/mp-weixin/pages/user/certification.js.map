<<<<<<< HEAD
{"version":3,"sources":["uni-app:///main.js","webpack:///D:/中软实训/Group/lexian_uniapp/uni-app/pages/user/certification.vue?d766","webpack:///D:/中软实训/Group/lexian_uniapp/uni-app/pages/user/certification.vue?390f","webpack:///D:/中软实训/Group/lexian_uniapp/uni-app/pages/user/certification.vue?d676","webpack:///D:/中软实训/Group/lexian_uniapp/uni-app/pages/user/certification.vue?1502","uni-app:///pages/user/certification.vue","webpack:///D:/中软实训/Group/lexian_uniapp/uni-app/pages/user/certification.vue?3d89","webpack:///D:/中软实训/Group/lexian_uniapp/uni-app/pages/user/certification.vue?e466"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4G;AACAA,UAAU,CAACC,sBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACc;;;AAG1E;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAumB,CAAgB,ioBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoE3nB,uF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AADA,S,CAEA;AACA;eACA,EACA,IADA,kBACA,CACA,SACA,cADA,EAEA,YAFA,EAGA,QAHA,EAIA,mBAJA,EAKA,sCALA,EAMA,yEANA,EAOA,kBAPA,EAQA,gBARA,EASA,WATA,EAUA,eAVA,EAWA,SAXA,EAYA,kCAZA,EAaA,6CAbA,GAgBA,CAlBA,EAmBA,MAnBA,oBAmBA,CACA;AACA;AACA,2BACA,CAvBA,EAwBA,WACA,WADA,yBACA,kBACA,qFACA,6BACA,WACA,iBACA,cACA,oDADA,EAEA,cAFA,EAGA,gBAHA,EAIA,QACA,oDADA,EAEA,iBAFA,EAGA,uCAHA,EAJA,EASA,gCACA,sBACA,8BACA,2BACA,uBACA,CACA,sBACA,6BACA,CACA,qBACA,uBACA,iBACA,uBADA,IAGA,CACA,CAxBA,EAyBA,0BACA,uBACA,CA3BA,IA6BA,CACA,CApCA,EAqCA,WArCA,uBAqCA,CArCA,EAqCA,CACA,sCACA,2BACA,CAxCA,EAyCA,OAzCA,qBAyCA,CACA,mBACA,QADA;;AAGA,KA7CA;AA8CA;AACA,eA/CA,yBA+CA;;AAEA;AACA,gBADA,EACA;AACA,gCAFA,EAEA;AACA,uCAHA,EAGA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA;AACA,SAdA;;AAgBA,KAjEA;AAkEA;AACA,eAnEA,uBAmEA,GAnEA,EAmEA;AACA;AACA,gBADA;AAEA,qBAFA;AAGA,mCAHA;AAIA;AACA,wDADA,CACA;AACA;AACA;AACA;AACA,SATA;;AAWA,KA/EA;AAgFA;AACA,aAjFA,qBAiFA,CAjFA,EAiFA;AACA;AACA,0BADA;AAEA,4CAFA;;AAIA,KAtFA;AAuFA;AACA,UAxFA,kBAwFA,CAxFA,EAwFA;AACA;AACA,qBADA;AAEA,8BAFA;AAGA,wBAHA;AAIA,yBAJA;AAKA;AACA;AACA;AACA;AACA,SATA;;AAWA,KApGA;AAqGA,mBArGA,6BAqGA;AACA;AACA;AACA;AACA;AACA;AACA,yDADA;AAEA,wBAFA;AAGA;AACA,+DADA,EAHA;;AAMA;AACA,4CADA;AAEA,kCAFA;AAGA,yCAHA,EANA;;AAWA;AACA;AACA;AACA;AACA;AACA,WAhBA;;AAkBA,OAnBA,MAmBA;AACA;AACA;;AAEA,KAhIA;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA,OAbA,MAaA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OATA,MASA;AACA;AACA;AACA,KA9JA;AA+JA,aA/JA,uBA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,0BAFA;;AAIA;AACA,kGADA;AAEA,wBAFA;AAGA;AACA,+DADA,EAHA;;AAMA;AACA,sCADA;AAEA,iCAFA,EANA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,iCAFA;;AAIA,eANA,MAMA;AACA;AACA,8BADA;AAEA,sCAFA;;AAIA;AACA,aAhBA,MAgBA;AACA;AACA;AACA;;AAEA,WAjCA;AAkCA,kBAlCA,sBAkCA;AACA;AACA,WApCA;;AAsCA;;AAEA,KAjNA;AAkNA;AACA,cAnNA,wBAmNA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,yBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,2BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,2BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,gCAFA;;AAIA;AACA;AACA;;AAEA,KA1PA,EAxBA,E;;;;;;;;;;;;;ACvEA;AAAA;AAAA;AAAA;AAAymC,CAAgB,mlCAAG,EAAC,C;;;;;;;;;;;ACA7nC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/certification.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user/certification.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./certification.vue?vue&type=template&id=2b6aa2af&\"\nvar renderjs\nimport script from \"./certification.vue?vue&type=script&lang=js&\"\nexport * from \"./certification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./certification.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/certification.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=template&id=2b6aa2af&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"left-bottom-sign\"></view>\r\n\t\t<view class=\"back-btn yticon icon-zuojiantou-up\" @click=\"navBack\"></view>\r\n\t\t<view class=\"right-top-sign\"></view>\r\n\t\t<!-- 设置白色背景防止软键盘把下部绝对定位元素顶上来盖住输入框等 -->\r\n\t\t<view class=\"wrapper\">\r\n\t\t\t<view class=\"left-top-sign\">LOGIN</view>\r\n\t\t\t<view class=\"welcome\">\r\n\t\t\t\t实名注册验证\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input-content\">\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<text class=\"tit\">真实姓名：</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\t:value=\"name\"\r\n\t\t\t\t\t\tplaceholder=\"请输入真实姓名\"\r\n\t\t\t\t\t\tmaxlength=\"11\"\r\n\t\t\t\t\t\tdata-key=\"name\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<text class=\"tit\">身份证号码：</text>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t:value=\"certificationId\"\r\n\t\t\t\t\t\tplaceholder=\"请输入身份证号码\"\r\n\t\t\t\t\t\tmaxlength=\"18\"\r\n\t\t\t\t\t\tdata-key=\"certificationId\"\r\n\t\t\t\t\t\t@input=\"inputChange\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"cu-bar bg-white margin-top\">\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t身份证头像面照片上传\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t{{imgList.length}}/1\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"grid col-1 grid-square flex-sub\">\r\n\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in imgList\" :key=\"index\" @tap=\"ViewImage\" :data-url=\"imgList[index]\">\r\n\t\t\t\t\t <image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"cu-tag bg-red\" @tap.stop=\"DelImg\" :data-index=\"index\">\r\n\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"solids\" @tap=\"ChooseImage\" v-if=\"imgList.length<1\">\r\n\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\r\n\t\t</view>\r\n\t\t\t\r\n\t\t\t<button class=\"confirm-btn\" @click=\"certificate\" >点击认证身份信息</button>\r\n\t\t\r\n\t</view>\r\n</template>\r\n \r\n<script>\r\n\tvar that;\r\n\timport common from '@/store/common.js'\r\n\t// 这是一个用不了的插件，要付费\r\n\t// const card = uni.requireNativePlugin('DC-CardRecognize');\r\n\texport default{\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'input',\r\n\t\t\t\tfocus: false,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tcertificationId:\"\",\r\n\t\t\t\tsrc:\"../../../../static/me/photo.png\",\r\n\t\t\t\thttpUrl:\"https://aip.baidubce.com/rest/2.0/ocr/v1/general?access_token=\",\r\n\t\t\t\timageBase64Str:\"\",\r\n\t\t\t\taccess_token:\"\",\r\n\t\t\t\timgList: [],\r\n\t\t\t\tmodalName: null,\r\n\t\t\t\tindex:-1,\r\n\t\t\t\tAPIKey: 'iiZYcBEgl437fmYiC6ErYE4c',\r\n\t\t\t\tSecretKey: 'xDToNT5kg702YPvFC85tITLBb7sB4g8l'\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// var that=this;\r\n\t\t\t// token验证\r\n\t\t\tthis.getAccess_token();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcertificate() {\r\n\t\t\t\tconsole.log(common.getGlobalUserInfo().ID,this.name,this.certificationId);\r\n\t\t\t\tvar flag = this.verifyData();\r\n\t\t\t\tif(flag){\r\n\t\t\t\t\tthis.getIDCard();\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: this.apiServer + '/customer/setCertificationId',\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\"customerId\": common.getGlobalUserInfo().ID,\r\n\t\t\t\t\t\t\t\"name\": this.name,\r\n\t\t\t\t\t\t\t\"certificationId\": this.certificationId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconst result = res.data\r\n\t\t\t\t\t\t\tconsole.log(\"后台返回数据\",result)\r\n\t\t\t\t\t\t\tif(result.status == 500){\r\n\t\t\t\t\t\t\t\tthis.$api.msg('网络错误');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(result == false){\r\n\t\t\t\t\t\t\t\tthis.$api.msg('操作失败，请刷新重试');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(result == true){\r\n\t\t\t\t\t\t\t\tthis.$api.msg('操作成功');\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl: \"/pages/user/user\",\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\tthis.$api.msg(\"网络错误\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinputChange(e) {\r\n\t\t\t\tconst key = e.currentTarget.dataset.key;\r\n\t\t\t\tthis[key] = e.detail.value;\r\n\t\t\t},\r\n\t\t\tnavBack() {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//选择图片\r\n\t\t\tChooseImage() {\r\n\t\t\t\t\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, //默认9\r\n\t\t\t\t\tsizeType: ['compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album','camera'], //从相册选择\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.tempFilePaths.length == 0) {\r\n\t\t\t\t\t\t\tthis.imgList = res.tempFilePaths\r\n\t\t\t\t\t\t\tconsole.log('2')\r\n\t\t\t\t\t\t\tconsole.log(\"this.imgList.length\", this.imgList.length)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.imgList = this.imgList.concat(res.tempFilePaths)\r\n\t\t\t\t\t\t\tthis.urlTobase64(res.tempFilePaths[0]);\r\n\t\t\t\t\t\t\tconsole.log('1')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//转base64码\r\n\t\t\turlTobase64(url) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tresponseType: 'arraybuffer',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet base64 = wx.arrayBufferToBase64(res.data); //把arraybuffer转成base64\r\n\t\t\t\t\t\t// this.imageBase64Str = base64 = 'data:image/jpeg;base64,' + base64; //不加上这串字符，在页面无法显示\r\n\t\t\t\t\t\tthis.imageBase64Str = base64;\r\n\t\t\t\t\t\t// console.log(this.imageBase64Str);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//预览图片\r\n\t\t\tViewImage(e) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: this.imgList,\r\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//删除图片\r\n\t\t\tDelImg(e) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '删除照片',\r\n\t\t\t\t\tcontent: '确定要删除这张照片吗？',\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.imgList.splice(e.currentTarget.dataset.index, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetAccess_token(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar accessToken= that.cache(\"accessToken\",null,null) || '';\r\n\t\t\t\tconsole.log(accessToken)\r\n\t\t\t\tif(!accessToken){\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: \"https://aip.baidubce.com/oauth/2.0/token\",\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tgrant_type: \"client_credentials\",\r\n\t\t\t\t\t\t\tclient_id: this.APIKey,\r\n\t\t\t\t\t\t\tclient_secret: this.SecretKey\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tconsole.log(res.data.access_token);\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"Baidu\",res.data);\r\n\t\t\t\t\t\t\tthat.access_token=res.data.access_token;\r\n\t\t\t\t\t\t\tthat.cache(\"accessToken\",res.data.access_token,null) || '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthat.access_token=accessToken;\r\n\t\t\t\t}\r\n \r\n\t\t\t},\r\n\t\t\t//缓存,默认有效期28天\r\n\t\t\tcache:function(key, value, seconds) {\r\n\t\t\t\tvar timestamp = Date.parse(new Date()) / 1000\r\n\t\t\t\t console.log(timestamp+\"===\"+key)\r\n\t\t\t\tif (key && value === null) {\r\n\t\t\t\t\t//删除缓存\r\n\t\t\t\t\t//获取缓存\r\n\t\t\t\t\tvar val = uni.getStorageSync(key);\r\n\t\t\t\t\tvar tmp = val.split(\"|\")\r\n\t\t\t\t\tif (!tmp[1] || timestamp >= tmp[1]) {\r\n\t\t\t\t\t\tconsole.log(\"key已失效\")\r\n\t\t\t\t\t\tuni.removeStorageSync(key)\r\n\t\t\t\t\t\treturn \"\"\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"key未失效\")\r\n\t\t\t\t\t\treturn tmp[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (key && value) {\r\n\t\t\t\t\t//设置缓存\r\n\t\t\t\t\tif (!seconds) {\r\n\t\t\t\t\t\tvar expire = timestamp + (3600 * 24 * 28)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar expire = timestamp + seconds\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue = value + \"|\" + expire\r\n\t\t\t\t\tuni.setStorageSync(key, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"key不能空\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetIDCard() {\r\n\t\t\t\tvar flag=this.verifyData();\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(flag){\r\n\t\t\t\t\tconsole.log(\"百度名片识别接口处理开始\")\r\n\t\t\t\t\t//百度名片识别接口处理开始\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\ttitle: \"识别中，请等待\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: \"https://aip.baidubce.com/rest/2.0/ocr/v1/idcard?access_token=\"+that.access_token,\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\timage: that.imageBase64Str,\r\n\t\t\t\t\t\t\tid_card_side:\"front\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif(!res.data.error_code){\r\n\t\t\t\t\t\t\t\tvar IdCard=res.data.words_result.公民身份号码.words;\r\n\t\t\t\t\t\t\t\tvar userName=res.data.words_result.姓名.words;\r\n\t\t\t\t\t\t\t\tconsole.log(res.data.words_result.公民身份号码.words)\r\n\t\t\t\t\t\t\t\tif(IdCard==that.certificationId&&userName==that.name){\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"身份验证成功\");\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\t\ttitle: '身份验证成功'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\ttitle: '身份信息有误请审核信息'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthat.$api.msg('请求失败请稍后重试');\r\n\t\t\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() { \r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t//校验输入的数据\r\n\t\t\tverifyData() {\r\n\t\t\t\tvar flag = true;\r\n\t\t\t\tif (!this.name) {\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '姓名不能为空'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.certificationId) {\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '身份证号不能为空'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar re15 = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$/;\r\n\t\t\t\tvar re18 = /^[1-9](\\d{5})(19|20)(\\d{2})((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)(\\d{3})(\\d|X|x)$/;\r\n\t\t\t\tvar res = (re15.test(this.certificationId) || re18.test(this.certificationId));  \r\n\t\t\t\tif(res==false){\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t    uni.showToast({\r\n\t\t\t\t    \ticon: 'none',\r\n\t\t\t\t    \ttitle: '身份证号填写有误'\r\n\t\t\t\t    }); \r\n\t\t\t\t    return false;  \r\n\t\t\t\t} \r\n\t\t\t\tif(!this.imageBase64Str){\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '请上传身份证照片含\t头像面'\r\n\t\t\t\t\t}); \r\n\t\t\t\t\treturn false;  \r\n\t\t\t\t}\r\n\t\t\t\treturn flag;\r\n \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n \r\n<style lang='scss'>\r\n\t@import \"/static/colorui/main.css\";\r\n\t@import \"/static/colorui/icon.css\";\r\n\t@import \"/static/colorui/animation.css\";\r\n\t\r\n\tpage{\r\n\t\tbackground: #fff;\r\n\t}\r\n\t.container{\r\n\t\tpadding-top: 30px;\r\n\t\tposition:relative;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #fff;\r\n\t}\r\n\t.wrapper{\r\n\t\tposition:relative;\r\n\t\tz-index: 60;\r\n\t\tbackground: #fff;\r\n\t\tpadding-bottom: 40upx;\r\n\t}\r\n\t.back-btn{\r\n\t\tposition:absolute;\r\n\t\tleft: 40upx;\r\n\t\tz-index: 9999;\r\n\t\tpadding-top: var(--status-bar-height);\r\n\t\ttop: 40upx;\r\n\t\tfont-size: 40upx;\r\n\t\tcolor: $font-color-dark;\r\n\t}\r\n\t.left-top-sign{\r\n\t\tfont-size: 120upx;\r\n\t\tcolor: $page-color-base;\r\n\t\tposition:relative;\r\n\t\tleft: -16upx;\r\n\t}\r\n\t.right-top-sign{\r\n\t\tposition:absolute;\r\n\t\ttop: 80upx;\r\n\t\tright: -30upx;\r\n\t\tz-index: 95;\r\n\t\t&:before, &:after{\r\n\t\t\tdisplay:block;\r\n\t\t\tcontent:\"\";\r\n\t\t\twidth: 400upx;\r\n\t\t\theight: 80upx;\r\n\t\t\tbackground: #b4f3e2;\r\n\t\t}\r\n\t\t&:before{\r\n\t\t\ttransform: rotate(50deg);\r\n\t\t\tborder-radius: 0 50px 0 0;\r\n\t\t}\r\n\t\t&:after{\r\n\t\t\tposition: absolute;\r\n\t\t\tright: -198upx;\r\n\t\t\ttop: 0;\r\n\t\t\ttransform: rotate(-50deg);\r\n\t\t\tborder-radius: 50px 0 0 0;\r\n\t\t\t/* background: pink; */\r\n\t\t}\r\n\t}\r\n\t.left-bottom-sign{\r\n\t\tposition:absolute;\r\n\t\tleft: -270upx;\r\n\t\tbottom: -320upx;\r\n\t\tborder: 100upx solid #d0d1fd;\r\n\t\tborder-radius: 50%;\r\n\t\tpadding: 180upx;\r\n\t}\r\n\t.welcome{\r\n\t\tposition:relative;\r\n\t\tleft: 50upx;\r\n\t\ttop: -80upx;\r\n\t\tfont-size: 46upx;\r\n\t\tcolor: #555;\r\n\t\ttext-shadow: 1px 0px 1px rgba(0,0,0,.3);\r\n\t}\r\n\t.input-content{\r\n\t\tpadding: 0 60upx;\r\n\t}\r\n\t.input-item{\r\n\t\tdisplay:flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items:flex-start;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 0 30upx;\r\n\t\tbackground:$page-color-light;\r\n\t\theight: 120upx;\r\n\t\tborder-radius: 4px;\r\n\t\tmargin-bottom: 50upx;\r\n\t\t&:last-child{\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\t\t.tit{\r\n\t\t\theight: 50upx;\r\n\t\t\tline-height: 56upx;\r\n\t\t\tfont-size: $font-sm+2upx;\r\n\t\t\tcolor: $font-color-base;\r\n\t\t}\r\n\t\tinput{\r\n\t\t\theight: 60upx;\r\n\t\t\tfont-size: $font-base + 2upx;\r\n\t\t\tcolor: $font-color-dark;\r\n\t\t\twidth: 100%;\r\n\t\t}\t\r\n\t}\r\n\t\r\n\t.confirm-btn{\r\n\t\twidth: 630upx;\r\n\t\theight: 76upx;\r\n\t\tline-height: 76upx;\r\n\t\tborder-radius: 50px;\r\n\t\tmargin-top: 70upx;\r\n\t\tbackground: $uni-color-primary;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: $font-lg;\r\n\t\t&:after{\r\n\t\t\tborder-radius: 100px;\r\n\t\t}\r\n\t}\r\n\t.forget-section-left{\r\n\t\tfont-size: $font-sm+5upx;\r\n\t\tposition:relative;\r\n\t\tcolor: $font-color-spec;\r\n\t\tleft: 60upx;\r\n\t\tmargin-top: 40upx;\r\n\t\twidth: 200upx;\r\n\t}\r\n\t.login-by-name-right{\r\n\t\tfont-size: $font-sm+5upx;\r\n\t\tcolor: $font-color-spec;\r\n\t\tposition: relative;\r\n\t\ttext-align:right;\r\n\t\tright: -485upx;\r\n\t\tmargin-top: -40upx;\r\n\t\twidth: 200upx;\r\n\t}\r\n\t.register-section{\r\n\t\tposition:absolute;\r\n\t\tleft: 0;\r\n\t\tbottom: 50upx;\r\n\t\twidth: 100%;\r\n\t\tfont-size: $font-sm+2upx;\r\n\t\tcolor: $font-color-base;\r\n\t\ttext-align: center;\r\n\t\ttext{\r\n\t\t\tcolor: $font-color-spec;\r\n\t\t\tmargin-left: 10upx;\r\n\t\t}\r\n\t}\r\n\t.option{\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 4%;\r\n\t\tmargin-left: 30upx;\r\n\t\tpadding-bottom: 30upx;\r\n\t\tborder-bottom: #333333 solid 0.5upx;\r\n\t}\r\n\t.msg-left {\r\n\t\tflex: 5;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t}\r\n\t.msg-right {\r\n\t\tflex: 2;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\ttext-align: center;\r\n\t\tmargin-right: 15upx;\r\n\t\tborder-bottom: #000000 solid 0.5upx;\r\n\t}\r\n\t.img {\r\n\t\tdisplay: flex;\r\n\t\tmargin-top: 4%;\r\n\t\tmargin-left: 30upx;\r\n\t\tpadding-bottom: 30upx;\r\n\t}\r\n\t.img image {\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: 8%;\r\n\t\twidth: 300upx;\r\n\t\theight: 300upx;\r\n\t}\r\n</style>\r\n","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594799657942\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/main.js","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue?085a","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue?485b","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue?3baa","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue?8ae1","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue?6da7","webpack:///H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue?6fa6"],"names":["createPage","Page","that","data","title","focus","name","certificationId","src","httpUrl","imageBase64Str","access_token","imgList","modalName","index","APIKey","SecretKey","onLoad","getAccess_token","methods","certificate","console","log","common","getGlobalUserInfo","ID","flag","verifyData","getIDCard","uni","request","url","apiServer","method","dataType","success","res","result","status","$api","msg","navigateTo","fail","inputChange","e","key","currentTarget","dataset","detail","value","navBack","navigateBack","delta","ChooseImage","chooseImage","count","sizeType","sourceType","tempFilePaths","length","concat","urlTobase64","responseType","base64","wx","arrayBufferToBase64","ViewImage","previewImage","urls","current","DelImg","showModal","content","cancelText","confirmText","confirm","splice","accessToken","cache","header","grant_type","client_id","client_secret","setStorageSync","seconds","timestamp","Date","parse","val","getStorageSync","tmp","split","removeStorageSync","expire","showLoading","mask","image","id_card_side","error_code","IdCard","words_result","公民身份号码","words","userName","姓名","showToast","icon","complete","hideLoading","re15","re18","test"],"mappings":"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","file":"pages/user/certification.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user/certification.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./certification.vue?vue&type=template&id=7668230a&\"\nvar renderjs\nimport script from \"./certification.vue?vue&type=script&lang=js&\"\nexport * from \"./certification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./certification.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"H:/NEU_Lexian/lexian_uniapp/uni-app/pages/user/certification.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=template&id=7668230a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar that;\nimport common from '@/store/common.js'\n// 这是一个用不了的插件，要付费\n// const card = uni.requireNativePlugin('DC-CardRecognize');\nexport default{\n\tdata() {\n\t\treturn {\n\t\t\ttitle: 'input',\n\t\t\tfocus: false,\n\t\t\tname: \"\",\n\t\t\tcertificationId:\"\",\n\t\t\tsrc:\"../../../../static/me/photo.png\",\n\t\t\thttpUrl:\"https://aip.baidubce.com/rest/2.0/ocr/v1/general?access_token=\",\n\t\t\timageBase64Str:\"\",\n\t\t\taccess_token:\"\",\n\t\t\timgList: [],\n\t\t\tmodalName: null,\n\t\t\tindex:-1,\n\t\t\tAPIKey: 'iiZYcBEgl437fmYiC6ErYE4c',\n\t\t\tSecretKey: 'xDToNT5kg702YPvFC85tITLBb7sB4g8l'\n\n\t\t}\n\t},\n\tonLoad() {\n\t\t// var that=this;\n\t\t// token验证\n\t\tthis.getAccess_token();\n\t},\n\tmethods: {\n\t\tcertificate() {\n\t\t\tconsole.log(common.getGlobalUserInfo().ID,this.name,this.certificationId);\n\t\t\tvar flag = this.verifyData();\n\t\t\tif(flag){\n\t\t\t\tthis.getIDCard();\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.apiServer + '/customer/setCertificationId',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t\"customerId\": common.getGlobalUserInfo().ID,\n\t\t\t\t\t\t\"name\": this.name,\n\t\t\t\t\t\t\"certificationId\": this.certificationId\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconst result = res.data\n\t\t\t\t\t\tconsole.log(\"后台返回数据\",result)\n\t\t\t\t\t\tif(result.status == 500){\n\t\t\t\t\t\t\tthis.$api.msg('网络错误');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(result == false){\n\t\t\t\t\t\t\tthis.$api.msg('操作失败，请刷新重试');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(result == true){\n\t\t\t\t\t\t\tthis.$api.msg('操作成功');\n\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\turl: \"/pages/user/user\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: res => {\n\t\t\t\t\t\tthis.$api.msg(\"网络错误\")\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tinputChange(e) {\n\t\t\tconst key = e.currentTarget.dataset.key;\n\t\t\tthis[key] = e.detail.value;\n\t\t},\n\t\tnavBack() {\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t},\n\t\t//选择图片\n\t\tChooseImage() {\n\t\t\t\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1, //默认9\n\t\t\t\tsizeType: ['compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album','camera'], //从相册选择\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.tempFilePaths.length == 0) {\n\t\t\t\t\t\tthis.imgList = res.tempFilePaths\n\t\t\t\t\t\tconsole.log('2')\n\t\t\t\t\t\tconsole.log(\"this.imgList.length\", this.imgList.length)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.imgList = this.imgList.concat(res.tempFilePaths)\n\t\t\t\t\t\tthis.urlTobase64(res.tempFilePaths[0]);\n\t\t\t\t\t\tconsole.log('1')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//转base64码\n\t\turlTobase64(url) {\n\t\t\tuni.request({\n\t\t\t\turl: url,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tresponseType: 'arraybuffer',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tlet base64 = wx.arrayBufferToBase64(res.data); //把arraybuffer转成base64\n\t\t\t\t\t// this.imageBase64Str = base64 = 'data:image/jpeg;base64,' + base64; //不加上这串字符，在页面无法显示\n\t\t\t\t\tthis.imageBase64Str = base64;\n\t\t\t\t\t// console.log(this.imageBase64Str);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t//预览图片\n\t\tViewImage(e) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: this.imgList,\n\t\t\t\tcurrent: e.currentTarget.dataset.url\n\t\t\t});\n\t\t},\n\t\t//删除图片\n\t\tDelImg(e) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除照片',\n\t\t\t\tcontent: '确定要删除这张照片吗？',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tconfirmText: '确定',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.imgList.splice(e.currentTarget.dataset.index, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tgetAccess_token(){\n\t\t\tvar that = this;\n\t\t\tvar accessToken= that.cache(\"accessToken\",null,null) || '';\n\t\t\tconsole.log(accessToken)\n\t\t\tif(!accessToken){\n\t\t\t\tuni.request({\n\t\t\t\t\turl: \"https://aip.baidubce.com/oauth/2.0/token\",\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tdata:{\n\t\t\t\t\t\tgrant_type: \"client_credentials\",\n\t\t\t\t\t\tclient_id: this.APIKey,\n\t\t\t\t\t\tclient_secret: this.SecretKey\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tconsole.log(res.data.access_token);\n\t\t\t\t\t\tuni.setStorageSync(\"Baidu\",res.data);\n\t\t\t\t\t\tthat.access_token=res.data.access_token;\n\t\t\t\t\t\tthat.cache(\"accessToken\",res.data.access_token,null) || '';\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthat.access_token=accessToken;\n\t\t\t}\n\n\t\t},\n\t\t//缓存,默认有效期28天\n\t\tcache:function(key, value, seconds) {\n\t\t\tvar timestamp = Date.parse(new Date()) / 1000\n\t\t\t console.log(timestamp+\"===\"+key)\n\t\t\tif (key && value === null) {\n\t\t\t\t//删除缓存\n\t\t\t\t//获取缓存\n\t\t\t\tvar val = uni.getStorageSync(key);\n\t\t\t\tvar tmp = val.split(\"|\")\n\t\t\t\tif (!tmp[1] || timestamp >= tmp[1]) {\n\t\t\t\t\tconsole.log(\"key已失效\")\n\t\t\t\t\tuni.removeStorageSync(key)\n\t\t\t\t\treturn \"\"\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(\"key未失效\")\n\t\t\t\t\treturn tmp[0]\n\t\t\t\t}\n\t\t\t} else if (key && value) {\n\t\t\t\t//设置缓存\n\t\t\t\tif (!seconds) {\n\t\t\t\t\tvar expire = timestamp + (3600 * 24 * 28)\n\t\t\t\t}else{\n\t\t\t\t\tvar expire = timestamp + seconds\n\t\t\t\t}\n\t\t\t\tvalue = value + \"|\" + expire\n\t\t\t\tuni.setStorageSync(key, value);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"key不能空\")\n\t\t\t}\n\t\t},\n\t\tgetIDCard() {\n\t\t\tvar flag=this.verifyData();\n\t\t\tvar that = this;\n\t\t\tif(flag){\n\t\t\t\tconsole.log(\"百度名片识别接口处理开始\")\n\t\t\t\t//百度名片识别接口处理开始\n\t\t\t\tuni.showLoading({\n\t\t\t\t\tmask: true,\n\t\t\t\t\ttitle: \"识别中，请等待\"\n\t\t\t\t});\n\t\t\t\tuni.request({\n\t\t\t\t\turl: \"https://aip.baidubce.com/rest/2.0/ocr/v1/idcard?access_token=\"+that.access_token,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timage: that.imageBase64Str,\n\t\t\t\t\t\tid_card_side:\"front\"\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tif(!res.data.error_code){\n\t\t\t\t\t\t\tvar IdCard=res.data.words_result.公民身份号码.words;\n\t\t\t\t\t\t\tvar userName=res.data.words_result.姓名.words;\n\t\t\t\t\t\t\tconsole.log(res.data.words_result.公民身份号码.words)\n\t\t\t\t\t\t\tif(IdCard==that.certificationId&&userName==that.name){\n\t\t\t\t\t\t\t\tconsole.log(\"身份验证成功\");\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\ttitle: '身份验证成功'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: '身份信息有误请审核信息'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthat.$api.msg('请求失败请稍后重试');\n\t\t\t\t\t\t\t// console.log(res);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\tcomplete() { \n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\n\t\t},\n\t\t//校验输入的数据\n\t\tverifyData() {\n\t\t\tvar flag = true;\n\t\t\tif (!this.name) {\n\t\t\t\tflag = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '姓名不能为空'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!this.certificationId) {\n\t\t\t\tflag = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '身份证号不能为空'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar re15 = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$/;\n\t\t\tvar re18 = /^[1-9](\\d{5})(19|20)(\\d{2})((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)(\\d{3})(\\d|X|x)$/;\n\t\t\tvar res = (re15.test(this.certificationId) || re18.test(this.certificationId));  \n\t\t\tif(res==false){\n\t\t\t\tflag = false;\n\t\t\t    uni.showToast({\n\t\t\t    \ticon: 'none',\n\t\t\t    \ttitle: '身份证号填写有误'\n\t\t\t    }); \n\t\t\t    return false;  \n\t\t\t} \n\t\t\tif(!this.imageBase64Str){\n\t\t\t\tflag = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '请上传身份证照片含\t头像面'\n\t\t\t\t}); \n\t\t\t\treturn false;  \n\t\t\t}\n\t\t\treturn flag;\n\n\t\t}\n\t}\n}\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./certification.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594801465530\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
>>>>>>> e501aadce3ff318d11142d6063443f4b51c98035
