<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="lexian.mapper.ShopMapper" >
  <resultMap id="BaseResultMap" type="Shop" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="establishTime" property="establishTime" jdbcType="TIMESTAMP" />
    <result column="kind" property="kind" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="isDelete" property="isDelete" jdbcType="INTEGER" />
    <result column="img" property="img" jdbcType="VARCHAR" />
    <result column="tag" property="tag" jdbcType="VARCHAR" />
    <result column="description" property="description" jdbcType="VARCHAR" />
  </resultMap>
<<<<<<< HEAD

=======
<<<<<<< HEAD

=======
>>>>>>> 7cc8a3ed0c589d58079118b055ceedc47447ab83
>>>>>>> c8a72d19cc8ce11718aa483687c4c56ab041c40b
  <select id="getAllShop" resultType="Shop">
    select
    shop.id, shop.`name`, shop.establishTime, shop.kind, shop.status, shop.isDelete, shop.img, shop.tag ,shop.description
    from
    shop
<<<<<<< HEAD
    inner join shop_manager_shop on shop.id = shop_manager_shop.shop_id
    inner join shop_manager on shop_manager.id = shop_manager_shop.shop_manager_id
    where shop.isDelete = 0 and shop_manager_shop.is_delete = 0
=======
<<<<<<< HEAD
    inner join shop_manager_shop on shop.id = shop_manager_shop.shop_id
    inner join shop_manager on shop_manager.id = shop_manager_shop.shop_manager_id
    where shop.isDelete = 0 and shop_manager_shop.is_delete = 0
=======
    where shop.isDelete = 0
>>>>>>> 7cc8a3ed0c589d58079118b055ceedc47447ab83
>>>>>>> c8a72d19cc8ce11718aa483687c4c56ab041c40b
  </select>
  <select id="getMaxShopId" resultType="java.lang.Integer">
    select max(shop.id)
    from shop
  </select>
  <update id="updateShop" parameterType="java.util.HashMap">
    update shop
    set
    shop.`name` = #{name},
    shop.kind = #{kind},
    shop.status = #{status},
    shop.tag = #{tag}
    where
    shop.id = #{id}
  </update>
  <update id="deleteShop">
    update shop
    set shop.isDelete = 1
    where shop.id = #{id}
  </update>
<<<<<<< HEAD
=======
<<<<<<< HEAD
>>>>>>> c8a72d19cc8ce11718aa483687c4c56ab041c40b
  <select id="searchShopByInformation" resultType="Shop" parameterType="java.lang.String">
    select
    shop.id, shop.`name`, shop.establishTime, shop.kind, shop.status, shop.isDelete, shop.img, shop.tag ,shop.description
    from shop
    inner join shop_manager_shop on shop.id = shop_manager_shop.shop_id
    <where>
      shop.isDelete = 0 and shop_manager_shop.is_delete = 0
      <if test="name != '%null%' ">
      and shop.`name` like  #{name}
      </if>
      <if test="id != null">
        and shop.id = #{id}
      </if>
      <if test="beginTime != null and endTime != null">
        and shop.establishTime<![CDATA[>=]]>#{beginTime} and shop.establishTime<![CDATA[<=]]>#{endTime}
      </if>
      <if test="status != null">
        and shop.status = #{status}
      </if>
<<<<<<< HEAD
=======
=======
  <update id="updateShopStstus0">
    update shop
    set shop.status = 0
    where shop.id = #{id}
  </update>

  <select id="searchShop" resultType="Shop">
    select
    shop.id, shop.`name`, shop.establishTime, shop.kind, shop.status, shop.img, shop.tag ,shop.description
    from shop
    <where>
      <if test="id != null and id != ''">
        shop.id like concat('%',#{id},'%')
      </if>
      <if test="name != null and name != '' ">
       and shop.`name` like ('%',#{name},'%')
      </if>
      <if test="status != null status != ''">
       and shop.status = #{status}
      </if>
      <if test="beginTime != null and beginTime != '' and endTime != null and endTime != ''">
        and shop.establishTime between #{beginTime} and #{endTime}
      </if>
      and shop.isDelete = 0
>>>>>>> 7cc8a3ed0c589d58079118b055ceedc47447ab83
>>>>>>> c8a72d19cc8ce11718aa483687c4c56ab041c40b
    </where>
  </select>
  <insert id="insertShop" parameterType="java.util.HashMap">
    insert into
    shop(id, `name`,establishTime, kind, status, tag , description, isDelete)
    values
    (#{shopId}, #{shopName}, #{date},#{unitId}, 0,#{tag}, #{description}, 0)
  </insert>
<<<<<<< HEAD
=======
<<<<<<< HEAD
>>>>>>> c8a72d19cc8ce11718aa483687c4c56ab041c40b
  <update id="updateShopStatus0" parameterType="java.util.List">
    update shop
    set shop.status = 0
    where shop.id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item.id}
    </foreach>
  </update>
  <update id="updateShopStatus1" parameterType="java.util.List">
    update shop
    set shop.status = 1
    where shop.id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item.id}
    </foreach>
  </update>
  <update id="updateShopStatus2" parameterType="java.util.List">
    update shop
    set shop.status = 2
    where shop.id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item.id}
    </foreach>
  </update>
<<<<<<< HEAD
=======
=======
>>>>>>> 7cc8a3ed0c589d58079118b055ceedc47447ab83
>>>>>>> c8a72d19cc8ce11718aa483687c4c56ab041c40b
</mapper>